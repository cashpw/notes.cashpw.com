<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Read Gmail in Emacs with mbsync and mu4e | Cash Prokop-Weaver</title>
<meta name=keywords content>
<meta name=description content="This is a guide to setting up access to email from a Gmail account (eg: @gmail.com) within Emacs (Doom Emacs) using mu, mbsync (isync), and mu4e (mu for emacs).
You may have to complete additional steps if you are not using doom emacs (a), Gmail, or if your set-up differs from mine in other ways.
Prerequisites Please be sure you&rsquo;ve completed these steps before continuing:
Required Software   Install mbsync version >= 1.">
<meta name=author content>
<link rel=canonical href=http://notes.cashpw.com/posts/5e8b11e4-9600-44b7-8cd4-1be85f359948/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.b29398f29a599d5e3004230f1be93c6d0e635ee0513a370a3f70268eb91bd59d.css integrity="sha256-spOY8ppZnV4wBCMPG+k8bQ5jXuBROjcKP3Amjrkb1Z0=" rel="preload stylesheet" as=style>
<link rel=icon href=http://notes.cashpw.com/favicon.ico>
<link rel=apple-touch-icon href=http://notes.cashpw.com/apple-touch-icon.png>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-69408538-1','auto'),ga('send','pageview'))</script>
<meta name=twitter:title content="Read Gmail in Emacs with mbsync and mu4e | Cash Prokop-Weaver">
<meta name=twitter:description content="This is a guide to setting up access to email from a Gmail account (eg: @gmail.com) within Emacs (Doom Emacs) using mu, mbsync (isync), and mu4e (mu for emacs).
You may have to complete additional steps if you are not using doom emacs (a), Gmail, or if your set-up differs from mine in other ways.
Prerequisites Please be sure you&rsquo;ve completed these steps before continuing:
Required Software   Install mbsync version >= 1.">
<meta property="og:title" content="Read Gmail in Emacs with mbsync and mu4e | Cash Prokop-Weaver">
<meta property="og:description" content="This is a guide to setting up access to email from a Gmail account (eg: @gmail.com) within Emacs (Doom Emacs) using mu, mbsync (isync), and mu4e (mu for emacs).
You may have to complete additional steps if you are not using doom emacs (a), Gmail, or if your set-up differs from mine in other ways.
Prerequisites Please be sure you&rsquo;ve completed these steps before continuing:
Required Software   Install mbsync version >= 1.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://notes.cashpw.com/posts/5e8b11e4-9600-44b7-8cd4-1be85f359948/">
<meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-12-27T20:01:00-08:00">
<meta property="article:modified_time" content="2022-12-17T14:06:11-08:00">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://notes.cashpw.com/posts/"},{"@type":"ListItem","position":2,"name":"Read Gmail in Emacs with mbsync and mu4e","item":"http://notes.cashpw.com/posts/5e8b11e4-9600-44b7-8cd4-1be85f359948/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Read Gmail in Emacs with mbsync and mu4e | Cash Prokop-Weaver","name":"Read Gmail in Emacs with mbsync and mu4e","description":"This is a guide to setting up access to email from a Gmail account (eg: @gmail.com) within Emacs (Doom Emacs) using mu, mbsync (isync), and mu4e (mu for emacs).\nYou may have to complete additional steps if you are not using doom emacs (a), Gmail, or if your set-up differs from mine in other ways.\nPrerequisites Please be sure you\u0026rsquo;ve completed these steps before continuing:\nRequired Software   Install mbsync version \u0026gt;= 1.","keywords":[],"wordCount":"532","inLanguage":"en","datePublished":"2021-12-27T20:01:00-08:00","dateModified":"2022-12-17T14:06:11-08:00","author":[{"@type":"Person","name":"Cash Prokop-Weaver"}],"mainEntityOfPage":{"@type":"WebPage","@id":"http://notes.cashpw.com/posts/5e8b11e4-9600-44b7-8cd4-1be85f359948/"},"publisher":{"@type":"Organization","name":"Cash Prokop-Weaver","logo":{"@type":"ImageObject","url":"http://notes.cashpw.com/favicon.ico"}}}</script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0,macros:{bigo:["{\\href{/posts/big_o_notation}{O}}(#1)",1],littleo:["{\\href{/posts/little_o_notation}{o}}(#1)",1],bigtheta:["{\\href{/posts/big_theta_notation}{\\Theta}}(#1)",1],bigomega:["{\\href{/posts/big_omega_notation}{\\Omega}}(#1)",1]}},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'})})</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript>
</head>
<body class="dark type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(a){switch(a){case'light':document.body.classList.remove('dark');break;case'dark':document.body.classList.add('dark');break;default:window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(a){switchTheme(a),localStorage.setItem("pref-theme",a)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=a=>{a?setPrefTheme('light'):setPrefTheme('dark')},window.addEventListener('toggle-theme',function(){const a=isDarkTheme();for(const b in toggleThemeCallbacks)toggleThemeCallbacks[b](a)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent('toggle-theme'))}</script>
<script>(function(){const b='dark',a=getPrefTheme(),c=a||b;switchTheme(c)})()</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://notes.cashpw.com/ accesskey=h title="Cash Prokop-Weaver (Alt + H)">Cash Prokop-Weaver</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=http://notes.cashpw.com/archives/ title=Archives>Archives
</a>
</li>
<li>
<a href=http://notes.cashpw.com/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search
</a>
</li>
<li>
<a href=http://notes.cashpw.com/tags/ title=Tags>Tags
</a>
</li>
</ul>
</nav>
</header>
<main class="main post">
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
Read Gmail in Emacs with mbsync and mu4e
</h1>
<div class=post-meta><span title="2021-12-27 20:01:00 -0800 -0800">2021-12-27</span>&nbsp;·&nbsp;<span style=margin-right:.5ch></span><span title="2022-12-17 14:06:11 -0800 -0800">2022-12-17</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;<a href=https://github.com/cashpw/notes/edit/main/read_gmail_in_emacs_with_mbsync_and_mu4e.org rel="noopener noreferrer" target=_blank>Edit</a>
</div>
<div class="post-meta post-references"></div><div class="post-meta post-stars"></div>
</header> <div class="toc side left">
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#prerequisites aria-label=Prerequisites>Prerequisites</a><ul>
<li class=menu-link-required-software>
<a href=#required-software aria-label="Required Software">Required Software</a></li>
<li class=menu-link-create-an-oauth2-client-id>
<a href=#create-an-oauth2-client-id aria-label="Create an OAuth2 Client ID">Create an OAuth2 Client ID</a></li>
<li class=menu-link-create-mbsyncrc>
<a href=#create-mbsyncrc aria-label="Create mbsyncrc">Create <code>mbsyncrc</code></a></li>
<li class=menu-link-emable-imap-in-your-gmail-account>
<a href=#emable-imap-in-your-gmail-account aria-label="Emable IMAP in your Gmail Account">Emable IMAP in your Gmail Account</a></li>
<li class=menu-link-enable-mu4e-within-emacs>
<a href=#enable-mu4e-within-emacs aria-label="Enable mu4e within emacs">Enable <code>mu4e</code> within <code>emacs</code></a></li></ul>
</li>
<li class=menu-link-sync-and-index-your-email>
<a href=#sync-and-index-your-email aria-label="Sync and index your email">Sync and index your email</a></li>
<li class=menu-link-flashcards>
<a href=#flashcards aria-label=Flashcards>Flashcards</a></li>
<li class=menu-link-backlinks>
<a href=#backlinks aria-label=Backlinks>Backlinks</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content>
<p>This is a guide to setting up access to email from a Gmail account (eg: @gmail.com) within <a href=/posts/5ad4f07c-b06a-4dbf-afa5-176f25b0ded7/>Emacs</a> (<a href=/posts/983095a2-2f92-46a9-868b-c79fa11fbcbb/>Doom Emacs</a>) using <code>mu</code>, <code>mbsync</code> (<code>isync</code>), and <code>mu4e</code> (<code>mu</code> for <code>emacs</code>).</p>
<p>You may have to complete additional steps if you are not using <a href=https://github.com/hlissner/doom-emacs target=_blank rel=noopener><code>doom emacs</code></a> (<a href=https://web.archive.org/web/2021*/https://github.com/hlissner/doom-emacs rel="noopener noreferrer" target=_blank>a</a>), Gmail, or if your set-up differs from mine in other ways.</p>
<h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>¶</a></h2>
<p>Please be sure you&rsquo;ve completed these steps before continuing:</p>
<h3 id=required-software>Required Software<a hidden class=anchor aria-hidden=true href=#required-software>¶</a></h3>
<ol>
<li>
<p>Install <code>mbsync</code> version >= 1.4.1.</p>
<p>We will use <code>mbsync</code> to download our email. It is essential that the version is greater than or equal to 1.3.3 to ensure the OAuth2 token is not cut off (see line 1891 in <a href=https://sourceforge.net/p/isync/isync/ci/v1.3.3/tree/src/drv_imap.c target=_blank rel=noopener>drv_imap.c</a> (<a href=https://web.archive.org/web/2021*/https://sourceforge.net/p/isync/isync/ci/v1.3.3/tree/src/drv_imap.c rel="noopener noreferrer" target=_blank>a</a>))</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone https://git.code.sf.net/p/isync/isync isync
cd isync
./autogen.sh
./configure
make
sudo make install
</code></pre></div></li>
<li>
<p>Install <code>mu</code>.</p>
<p><code>mu</code> will index the emails we&rsquo;ve downloaded with <code>mbsync</code> and provide them to the <code>mu4e</code> package.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install maildir-utils
</code></pre></div></li>
<li>
<p>Install <code>mu4e</code>.</p>
<p><code>mu4e</code> is our email client within emacs.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install mu4e
</code></pre></div></li>
<li>
<p>Download <code>gmail-oauth2-tools</code>.</p>
<p>This utility will generate our refersh tokens for us.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone https://github.com/google/gmail-oauth2-tools
</code></pre></div></li>
<li>
<p>Download Cyrus SASL Oauth2</p>
<p><code>mbsync</code> doesn&rsquo;t support OAuth2, so we&rsquo;ll install a plugin which enables it.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Reference: https://unix.stackexchange.com/a/632794/423626</span>
<span style=color:#75715e># Clone the Cyrus SASL OAuth2 sources.</span>
git clone https://github.com/moriyoshi/cyrus-sasl-xoauth2.git

<span style=color:#75715e># Configure and make.</span>
cd cyrus-sasl-xoauth2
./autogen.sh
./configure

<span style=color:#75715e># SASL2 libraries on Ubuntu are in /usr/lib/x86_64-linux-gnu/; modify the Makefile accordingly</span>
sed -i <span style=color:#e6db74>&#39;s%pkglibdir = ${CYRUS_SASL_PREFIX}/lib/sasl2%pkglibdir = ${CYRUS_SASL_PREFIX}/lib/x86_64-linux-gnu/sasl2%&#39;</span> Makefile

make
sudo make install

<span style=color:#75715e># Install saslpluginviewer</span>
sudo apt install sasl2-bin

<span style=color:#75715e># Verify XOAUTH2 is known to SASL.</span>
saslpluginviewer | grep XOAUTH2
</code></pre></div></li>
</ol>
<h3 id=create-an-oauth2-client-id>Create an OAuth2 Client ID<a hidden class=anchor aria-hidden=true href=#create-an-oauth2-client-id>¶</a></h3>
<p>Please refer to: <a href=/posts/486b286b-8806-4282-af4e-cfbac4fb0990/>Create an OAuth2 Client ID</a></p>
<h3 id=create-mbsyncrc>Create <code>mbsyncrc</code><a hidden class=anchor aria-hidden=true href=#create-mbsyncrc>¶</a></h3>
<ol>
<li>Create a new file at <code>~/.mbsyncrc</code> (or symlink to that location, etc).</li>
<li>Base your config on mine, included below:
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text># Account Information
IMAPAccount gmail
Host imap.gmail.com
User cashbweaver@gmail.com
AuthMechs XOAUTH2
PassCmd &#34;/path/to/gen_email_access_token.sh&#34;
SSLType IMAPS

IMAPStore gmail-remote
Account gmail

MaildirStore gmail-local
Path ~/.mail/cashweaver-gmail
Inbox ~/.mail/cashweaver-gmail/inbox

Channel gmail-inbox
Far :gmail-remote:
Near :gmail-local:
Patterns &#34;INBOX&#34;

Channel gmail-sent
Far :gmail-remote:&#34;[Gmail]/Sent Mail&#34;
Near :gmail-local:sent
Remove Near
Create near
SyncState *

Channel gmail-trash
Far :gmail-remote:&#34;[Gmail]/Trash&#34;
Near :gmail-local:trash
Remove Near
Create near
SyncState *

Channel gmail-drafts
Far :gmail-remote:&#34;[Gmail]/Drafts&#34;
Near :gmail-local:drafts
Remove Near
Create near
SyncState *

Group gmail
Channel gmail-inbox
Channel gmail-sent
Channel gmail-trash
Channel gmail-drafts
</code></pre></div></li>
</ol>
<h3 id=emable-imap-in-your-gmail-account>Emable IMAP in your Gmail Account<a hidden class=anchor aria-hidden=true href=#emable-imap-in-your-gmail-account>¶</a></h3>
<p>Follow the <a href="https://support.google.com/mail/answer/7126229?hl=en" target=_blank rel=noopener>documentation</a> (<a href="https://web.archive.org/web/2021*/https://support.google.com/mail/answer/7126229?hl=en" rel="noopener noreferrer" target=_blank>a</a>) to enable IMAP.</p>
<h3 id=enable-mu4e-within-emacs>Enable <code>mu4e</code> within <code>emacs</code><a hidden class=anchor aria-hidden=true href=#enable-mu4e-within-emacs>¶</a></h3>
<p>This step is written for those using <a href=https://github.com/hlissner/doom-emacs target=_blank rel=noopener><code>doom emacs</code></a> (<a href=https://web.archive.org/web/2021*/https://github.com/hlissner/doom-emacs rel="noopener noreferrer" target=_blank>a</a>). Those using other flavors of <code>emacs</code> will need to enable <code>mu4e</code> on their own.</p>
<ol>
<li>
<p>Enable <code>mu4e</code> within <a href=https://github.com/hlissner/doom-emacs target=_blank rel=noopener><code>doom emacs</code></a> (<a href=https://web.archive.org/web/2021*/https://github.com/hlissner/doom-emacs rel="noopener noreferrer" target=_blank>a</a>) by uncommenting <code>(mu4e +gmail)</code> within <code>init.el</code>.</p>
</li>
<li>
<p>Sync <code>doom emacs</code>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>doom sync
</code></pre></div></li>
<li>
<p>Reload <code>doom emacs</code> by either killing <code>emacs</code> and restarting, or by running <code>doom/reload</code> (<code>SPC : doom/reload</code> or <code>SPC h r r</code>).</p>
</li>
</ol>
<h2 id=sync-and-index-your-email>Sync and index your email<a hidden class=anchor aria-hidden=true href=#sync-and-index-your-email>¶</a></h2>
<p>Follow the steps documented by <a href=https://github.com/hlissner/doom-emacs/blob/develop/modules/email/mu4e/README.org target=_blank rel=noopener>doom emacs' mu4e section</a> (<a href=https://web.archive.org/web/2021*/https://github.com/hlissner/doom-emacs/blob/develop/modules/email/mu4e/README.org rel="noopener noreferrer" target=_blank>a</a>).</p>
<ol>
<li>
<p>Sync your email by running <code>mbsync --all</code>.</p>
<p>This may take a while.</p>
</li>
<li>
<p>Index your email by running:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>mu init --maildir ~/.mail --my-address &lt;you&gt;@gmail.com
mu index
</code></pre></div></li>
<li>
<p>Configure emacs to use your email address.</p>
<p>As an example:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>;; Each path is relative to `+mu4e-mu4e-mail-path&#39;, which is ~/.mail by default
(set-email-account! &#34;gmail.com&#34;
                    &#39;((mu4e-sent-folder       . &#34;/gmail.com/Sent Mail&#34;)
                    (mu4e-drafts-folder     . &#34;/gmail.com/Drafts&#34;)
                    (mu4e-trash-folder      . &#34;/gmail.com/Trash&#34;)
                    (mu4e-refile-folder     . &#34;/gmail.com/All Mail&#34;)
                    (smtpmail-smtp-user     . &#34;&lt;you&gt;@gmail.com&#34;)
                    (mu4e-compose-signature . &#34;&lt;Your signature here&gt;&#34;))
</code></pre></div></li>
</ol>
<h2 id=flashcards>Flashcards<a hidden class=anchor aria-hidden=true href=#flashcards>¶</a></h2>
<h2 id=backlinks>Backlinks<a hidden class=anchor aria-hidden=true href=#backlinks>¶</a></h2>
<ul>
<li><a href=/posts/8f61e9e6-4f19-4a64-b392-185062df45a0/>Email in emacs</a></li>
</ul>
</div>
<footer class=post-footer>
<script>var nextUntil=function(a,d,b){var c=[];for(a=a.nextElementSibling;a;){if(a.matches(d))break;if(b&&!a.matches(b)){a=a.nextElementSibling;continue}c.push(a),a=a.nextElementSibling}return c};const flashcardHeader=document.getElementById("flashcards");if(flashcardHeader){const e=nextUntil(flashcardHeader,"h2"),a=document.createElement('div');a.setAttribute('class','toc flashcards');const b=document.createElement('details');a.appendChild(b);const d=document.createElement('summary');b.appendChild(d);const c=document.createElement('div');c.setAttribute('class','inner'),b.appendChild(c),nextUntil(flashcardHeader,"h2").forEach(a=>{c.appendChild(a)}),flashcardHeader.parentNode.insertBefore(document.createElement('hr'),flashcardHeader),flashcardHeader.parentNode.insertBefore(a,flashcardHeader),d.appendChild(flashcardHeader)}</script>
<script>const backlinkHeader=document.getElementById("backlinks");if(backlinkHeader){const b=document.createElement('h4');b.innerHTML=backlinkHeader.innerHTML;const c=backlinkHeader.nextElementSibling;console.log(c);const a=document.createElement('aside');a.setAttribute('class','backlinks toc side right'),backlinkHeader.parentNode.insertBefore(a,backlinkHeader),a.appendChild(b),a.appendChild(c),backlinkHeader.remove(),b.id="backlinks"}</script>
<script src=/js/citations/custom.js></script>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=http://notes.cashpw.com/>Cash Prokop-Weaver</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a>
</span>
<span style=display:inline-block;margin-left:1em>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>(function(){const b=''=='1';if(b)return;let a=document.getElementById("theme-toggle");a.removeEventListener('click',toggleThemeListener),a.addEventListener('click',toggleThemeListener)})()</script>
<script>(function(){let a=document.getElementById('menu');a&&(a.scrollLeft=localStorage.getItem("menu-scroll-position"),a.onscroll=function(){localStorage.setItem("menu-scroll-position",a.scrollLeft)});const b=''=='1',c=''=='1';if(window.matchMedia('(prefers-reduced-motion: reduce)').matches||b||c)return;document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})})()</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>if(window.scrollListeners)for(const a of scrollListeners)window.removeEventListener('scroll',a);window.scrollListeners=[]</script>
<script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
<script>(function(){const h='1'=='1';if(!h)return;if(!document.querySelector('.toc')){console.log('no toc found, ignore toc scroll');return}const i=window.scrollListeners,c=document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]'),d='active';let a=c[0];e(a).classList.add(d);const g=()=>{const b=[];for(const a of c)if(j(a)<5)b.push(a);else break;b.length>0?newActiveHeading=b[b.length-1]:newActiveHeading=c[0],a!=newActiveHeading&&(e(a).classList.remove(d),a=newActiveHeading,e(a).classList.add(d))};let b=null;const f=()=>{b!==null&&clearTimeout(b),b=setTimeout(g,50)};window.addEventListener('scroll',f,!1),i.push(f);function e(a){const b=encodeURI(a.getAttribute('id')).toLowerCase();return document.querySelector(`.toc ul li a[href="#${b}"]`)}function j(a){if(!a.getClientRects().length)return 0;let b=a.getBoundingClientRect();return b.top}})()</script>
</body>
</html>