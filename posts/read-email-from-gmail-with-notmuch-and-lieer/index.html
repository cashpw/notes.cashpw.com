<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Gmail in Emacs with notmuch and lieer | Cash Weaver</title>
<meta name=keywords content="doom-emacs,emacs,email,gmail">
<meta name=description content="This is a guide to setting up access to email (eg: @gmail.com) within doom emacs using notmuch and lieer.
You may have to complete additional steps if you are not using doom emacs or if your set-up differs from mine in other ways.
Prerequisites Please be sure you&rsquo;ve completed these steps before continuing:
Required Software   lieer
git clone https://github.com/gauteh/lieer.git cd lieer pip3 install -r requirements.txt   notmuch">
<meta name=author content>
<link rel=canonical href=http://cashweaver.com/posts/read-email-from-gmail-with-notmuch-and-lieer/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.85482fa9276680bd7f3afe8e4721baa8345bdd1d7ee5ffeb82360e82399d7698.css integrity="sha256-hUgvqSdmgL1/Ov6ORyG6qDRb3R1+5f/rgjYOgjmddpg=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://cashweaver.com/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=http://cashweaver.com/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=http://cashweaver.com/favicon-32x32.png>
<link rel=apple-touch-icon href=http://cashweaver.com/apple-touch-icon.png>
<link rel=mask-icon href=http://cashweaver.com/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Gmail in Emacs with notmuch and lieer">
<meta property="og:description" content="This is a guide to setting up access to email (eg: @gmail.com) within doom emacs using notmuch and lieer.
You may have to complete additional steps if you are not using doom emacs or if your set-up differs from mine in other ways.
Prerequisites Please be sure you&rsquo;ve completed these steps before continuing:
Required Software   lieer
git clone https://github.com/gauteh/lieer.git cd lieer pip3 install -r requirements.txt   notmuch">
<meta property="og:type" content="article">
<meta property="og:url" content="http://cashweaver.com/posts/read-email-from-gmail-with-notmuch-and-lieer/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-04-24T00:00:00+00:00">
<meta property="article:modified_time" content="2021-04-24T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Gmail in Emacs with notmuch and lieer">
<meta name=twitter:description content="This is a guide to setting up access to email (eg: @gmail.com) within doom emacs using notmuch and lieer.
You may have to complete additional steps if you are not using doom emacs or if your set-up differs from mine in other ways.
Prerequisites Please be sure you&rsquo;ve completed these steps before continuing:
Required Software   lieer
git clone https://github.com/gauteh/lieer.git cd lieer pip3 install -r requirements.txt   notmuch">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://cashweaver.com/posts/"},{"@type":"ListItem","position":2,"name":"Gmail in Emacs with notmuch and lieer","item":"http://cashweaver.com/posts/read-email-from-gmail-with-notmuch-and-lieer/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Gmail in Emacs with notmuch and lieer","name":"Gmail in Emacs with notmuch and lieer","description":"This is a guide to setting up access to email (eg: @gmail.com) within doom emacs using notmuch and lieer.\nYou may have to complete additional steps if you are not using doom emacs or if your set-up differs from mine in other ways.\nPrerequisites Please be sure you\u0026rsquo;ve completed these steps before continuing:\nRequired Software   lieer\ngit clone https://github.com/gauteh/lieer.git cd lieer pip3 install -r requirements.txt   notmuch","keywords":["doom-emacs","emacs","email","gmail"],"articleBody":"This is a guide to setting up access to email (eg: @gmail.com) within doom emacs using notmuch and lieer.\nYou may have to complete additional steps if you are not using doom emacs or if your set-up differs from mine in other ways.\nPrerequisites Please be sure you’ve completed these steps before continuing:\nRequired Software   lieer\ngit clone https://github.com/gauteh/lieer.git cd lieer pip3 install -r requirements.txt   notmuch\nsudo apt install notmuch   Create an OAuth2 Client ID  Please refer to: Create an OAuth2 Client ID Ensure GMail APIs are enabled for this Client ID. Download the JSON format of this key.  Enable notmuch within emacs This is written for those using doom emacs. Those using other flavors of emacs will need to enable notmuch on their own.\n Enable notmuch by uncommenting notmuch within init.el beneath the :email header. Run doom sync in your shell. Reload doom emacs by either killing emacs and restarting, or by running doom/reload (SPC : doom/reload or SPC h r r).  Configure notmuch These steps are pulled from notmuch’s own documentation.\n  Run notmuch in your shell to create ~/.notmuch-config.\n  Perform initial indexing:\n# Create a directory to house your mail if you don't already have one. mkdir -p /path/to/your/mail/directory cd /path/to/your/mail/directory notmuch new   You should see something like:\nFound 0 total files (that's not much mail) No new mail. Configure lieer These steps are pulled from lieer’s own documentation.\n  Make a directory for the lieer storage and state files (local repository).\ncd /path/to/your/mail/directory mkdir .gmail cd you.gmail   Update your ~/.notmuch-config to ignore json, lock, and bak files by updating the [new] section to read:\n[new] tags=new ignore=/.*[.](json|lock|bak)$/   Initialize your mail storage.\nThis command will open a new tab in your browser. We need to run this command once before we can specify our own credentials. Feel free to close the tab as soon as it opens as we’ll be swapping the default client id with our own in the next steps.\n# From within /path/to/your/mail/directory/.gmail /path/to/lieer/gmi init @gmail.com   Cancel out (CTRL-C).\nYou should see a message similar to:\ninit: repository is set up, but authorization failed. re-run 'gmi auth' with proper parameters to complete authorization   Set your credentials.\n# From within /path/to/your/mail/directory/.gmail /path/to/lieer/gmi auth \\  --credentials=/path/to/your/OAuth2/client/id.json # Or, if you're working remotely (SSHing into your workstation, etc) /path/to/lieer/gmi \\  --noauth_local_webserver \\  auth \\  --credentials=/path/to/your/OAuth2/client/id.json Open the link and authenticate using your @gmail.com account. Copy the code and paste it back into the running gmi command. You should see a message like:\nAuthentication successful. credentials stored in /path/to/your/mail/directory/you.gmail/.credentials.gmailieer.json   Sync your email.\nThis step may take a long time. My initial sync of 90k emails took 56 real-time minutes.\n# From within /path/to/your/mail/directory/.gmail /path/to/lieer/gmi sync   Set up Cronjob to Sync Email You could also use a systemd timer for this.\n  Create a new shell script to sync your email. Remember to chmod 777!\n#!/bin/bash  cd /path/to/your/mail/directory/you.gmail /path/to/lieer/gmi sync   Configure the cronjob with crontab -e.\n# Sync email with lieer every three minutes. */3 * * * * bash /path/to/your/script/sync_email.sh   Configure notmuch within emacs (optional)   Set up saved searches.\n  Prevent wrapping text at 70 characters while composing an email:\n; This is valid in doom emacs. You may need to customize for other distributions. ; Prevent wrapping at 70 characters in email composition. (add-hook! 'message-mode-hook 'turn-off-auto-fill) (add-hook! 'message-mode-hook 'visual-line-mode)   Done! For those of you using doom emacs, you can open notmuch from anywhere with SPC o m.\n","wordCount":"566","inLanguage":"en","datePublished":"2021-04-24T00:00:00Z","dateModified":"2021-04-24T00:00:00Z","author":[{"@type":"Person","name":"Cash Weaver"}],"mainEntityOfPage":{"@type":"WebPage","@id":"http://cashweaver.com/posts/read-email-from-gmail-with-notmuch-and-lieer/"},"publisher":{"@type":"Organization","name":"Cash Weaver","logo":{"@type":"ImageObject","url":"http://cashweaver.com/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://cashweaver.com/ accesskey=h title="Cash Weaver (Alt + H)">Cash Weaver</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=http://cashweaver.com/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=http://cashweaver.com/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
Gmail in Emacs with notmuch and lieer
</h1>
<div class=post-meta><span title="2021-04-24 00:00:00 +0000 UTC">2021-04-04</span>&nbsp;·&nbsp;<span style=margin-right:.5ch>Updated:</span><span title="2021-04-24 00:00:00 +0000 UTC">2021-04-04</span>&nbsp;·&nbsp;3 min
</div>
<div class=post-meta><a href=https://github.com/cashweaver/roam/tree/main/read-email-from-gmail-with-notmuch-and-lieer.org rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
<div class="post-meta post-references"></div>
<div class="post-meta post-references"></div><div class="post-meta post-tags">
<span style=margin-right:.5ch>Tags:</span>
<a href=http://cashweaver.com/tags/doom-emacs/>doom-emacs</a>,&nbsp;<a href=http://cashweaver.com/tags/emacs/>emacs</a>,&nbsp;<a href=http://cashweaver.com/tags/email/>email</a>,&nbsp;<a href=http://cashweaver.com/tags/gmail/>gmail</a></div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#prerequisites aria-label=Prerequisites>Prerequisites</a><ul>
<li>
<a href=#required-software aria-label="Required Software">Required Software</a></li>
<li>
<a href=#create-an-oauth2-client-id aria-label="Create an OAuth2 Client ID">Create an OAuth2 Client ID</a></li>
<li>
<a href=#enable-notmuch-within-emacs aria-label="Enable notmuch within emacs">Enable <code>notmuch</code> within <code>emacs</code></a></li></ul>
</li>
<li>
<a href=#configure-notmuch aria-label="Configure notmuch">Configure <code>notmuch</code></a></li>
<li>
<a href=#configure-lieer aria-label="Configure lieer">Configure <code>lieer</code></a><ul>
<li>
<a href=#set-up-cronjob-to-sync-email aria-label="Set up Cronjob to Sync Email">Set up Cronjob to Sync Email</a></li></ul>
</li>
<li>
<a href=#configure-notmuch-within-emacs-optional aria-label="Configure notmuch within emacs (optional)">Configure <code>notmuch</code> within <code>emacs</code> (optional)</a></li>
<li>
<a href=#done aria-label=Done!>Done!</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>This is a guide to setting up access to email (eg: @gmail.com) within <a href=https://github.com/hlissner/doom-emacs><code>doom emacs</code></a> using <a href=https://notmuchmail.org/><code>notmuch</code></a> and <a href=https://github.com/gauteh/lieer><code>lieer</code></a>.</p>
<p>You may have to complete additional steps if you are not using <a href=https://github.com/hlissner/doom-emacs><code>doom emacs</code></a> or if your set-up differs from mine in other ways.</p>
<h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2>
<p>Please be sure you&rsquo;ve completed these steps before continuing:</p>
<h3 id=required-software>Required Software<a hidden class=anchor aria-hidden=true href=#required-software>#</a></h3>
<ol>
<li>
<p><code>lieer</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone https://github.com/gauteh/lieer.git
cd lieer
pip3 install -r requirements.txt
</code></pre></div></li>
<li>
<p><code>notmuch</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install notmuch
</code></pre></div></li>
</ol>
<h3 id=create-an-oauth2-client-id>Create an OAuth2 Client ID<a hidden class=anchor aria-hidden=true href=#create-an-oauth2-client-id>#</a></h3>
<ol>
<li>Please refer to: <a href=/create-an-oauth2-client-id-for-gmail>Create an OAuth2 Client ID</a></li>
<li>Ensure GMail APIs are enabled for this Client ID.</li>
<li>Download the JSON format of this key.</li>
</ol>
<h3 id=enable-notmuch-within-emacs>Enable <code>notmuch</code> within <code>emacs</code><a hidden class=anchor aria-hidden=true href=#enable-notmuch-within-emacs>#</a></h3>
<p>This is written for those using <a href=https://github.com/hlissner/doom-emacs><code>doom emacs</code></a>. Those using other flavors of <code>emacs</code> will need to enable <code>notmuch</code> on their own.</p>
<ol>
<li>Enable <code>notmuch</code> by uncommenting <code>notmuch</code> within <code>init.el</code> beneath the <code>:email</code> header.</li>
<li>Run <code>doom sync</code> in your shell.</li>
<li>Reload <code>doom emacs</code> by either killing <code>emacs</code> and restarting, or by running <code>doom/reload</code> (<code>SPC : doom/reload</code> or <code>SPC h r r</code>).</li>
</ol>
<h2 id=configure-notmuch>Configure <code>notmuch</code><a hidden class=anchor aria-hidden=true href=#configure-notmuch>#</a></h2>
<p>These steps are pulled from <code>notmuch</code>&rsquo;s own <a href=https://notmuchmail.org/getting-started/>documentation</a>.</p>
<ol>
<li>
<p>Run <code>notmuch</code> in your shell to create <code>~/.notmuch-config</code>.</p>
</li>
<li>
<p>Perform initial indexing:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Create a directory to house your mail if you don&#39;t already have one.</span>
mkdir -p /path/to/your/mail/directory

cd /path/to/your/mail/directory
notmuch new
</code></pre></div></li>
</ol>
<p>You should see something like:</p>
<pre tabindex=0><code>Found 0 total files (that's not much mail)
No new mail.
</code></pre><h2 id=configure-lieer>Configure <code>lieer</code><a hidden class=anchor aria-hidden=true href=#configure-lieer>#</a></h2>
<p>These steps are pulled from <code>lieer</code>&rsquo;s own <a href=https://github.com/gauteh/lieer#usage>documentation</a>.</p>
<ol>
<li>
<p>Make a directory for the lieer storage and state files (local repository).</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>cd /path/to/your/mail/directory
mkdir &lt;you&gt;.gmail
cd you.gmail
</code></pre></div></li>
<li>
<p>Update your <code>~/.notmuch-config</code> to ignore <code>json</code>, <code>lock</code>, and <code>bak</code> files by updating the <code>[new]</code> section to read:</p>
<pre tabindex=0><code>[new]
tags=new
ignore=/.*[.](json|lock|bak)$/
</code></pre></li>
<li>
<p>Initialize your mail storage.</p>
<p>This command will open a new tab in your browser. We need to run this command once before we can specify our own credentials. Feel free to close the tab as soon as it opens as we&rsquo;ll be swapping the default client id with our own in the next steps.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># From within /path/to/your/mail/directory/&lt;you&gt;.gmail</span>
/path/to/lieer/gmi init &lt;you&gt;@gmail.com
</code></pre></div></li>
<li>
<p>Cancel out (<code>CTRL-C</code>).</p>
<p>You should see a message similar to:</p>
<pre tabindex=0><code>init: repository is set up, but authorization failed. re-run 'gmi auth' with proper parameters to complete authorization
</code></pre></li>
<li>
<p>Set your credentials.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># From within /path/to/your/mail/directory/&lt;you&gt;.gmail</span>
/path/to/lieer/gmi auth <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  --credentials<span style=color:#f92672>=</span>/path/to/your/OAuth2/client/id.json

<span style=color:#75715e># Or, if you&#39;re working remotely (SSHing into your workstation, etc)</span>
/path/to/lieer/gmi <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  --noauth_local_webserver <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  auth <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  --credentials<span style=color:#f92672>=</span>/path/to/your/OAuth2/client/id.json
</code></pre></div><p>Open the link and authenticate using your <code>@gmail.com</code> account. Copy the code and paste it back into the running <code>gmi</code> command. You should see a message like:</p>
<pre tabindex=0><code>Authentication successful.
credentials stored in /path/to/your/mail/directory/you.gmail/.credentials.gmailieer.json
</code></pre></li>
<li>
<p>Sync your email.</p>
<p>This step may take a long time. My initial sync of 90k emails took 56 real-time minutes.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># From within /path/to/your/mail/directory/&lt;you&gt;.gmail</span>
/path/to/lieer/gmi sync
</code></pre></div></li>
</ol>
<h3 id=set-up-cronjob-to-sync-email>Set up Cronjob to Sync Email<a hidden class=anchor aria-hidden=true href=#set-up-cronjob-to-sync-email>#</a></h3>
<p>You could also use a <code>systemd</code> timer for this.</p>
<ol>
<li>
<p>Create a new shell script to sync your email. Remember to <code>chmod 777</code>!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e>#!/bin/bash
</span><span style=color:#75715e></span>
cd /path/to/your/mail/directory/you.gmail
/path/to/lieer/gmi sync
</code></pre></div></li>
<li>
<p>Configure the cronjob with <code>crontab -e</code>.</p>
<pre tabindex=0><code># Sync email with lieer every three minutes.
*/3 * * * * bash /path/to/your/script/sync_email.sh
</code></pre></li>
</ol>
<h2 id=configure-notmuch-within-emacs-optional>Configure <code>notmuch</code> within <code>emacs</code> (optional)<a hidden class=anchor aria-hidden=true href=#configure-notmuch-within-emacs-optional>#</a></h2>
<ul>
<li>
<p>Set up <a href=https://notmuchmail.org/doc/latest/notmuch-emacs.html#saved-searches>saved searches</a>.</p>
</li>
<li>
<p>Prevent wrapping text at 70 characters while composing an email:</p>
<pre tabindex=0><code class=language-common_lisp data-lang=common_lisp>; This is valid in doom emacs. You may need to customize for other distributions.
; Prevent wrapping at 70 characters in email composition.
(add-hook! 'message-mode-hook 'turn-off-auto-fill)
(add-hook! 'message-mode-hook 'visual-line-mode)
</code></pre></li>
</ul>
<h2 id=done>Done!<a hidden class=anchor aria-hidden=true href=#done>#</a></h2>
<p>For those of you using <a href=https://github.com/hlissner/doom-emacs><code>doom emacs</code></a>, you can open notmuch from anywhere with <code>SPC o m</code>.</p>
</div>
<footer class=post-footer>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=http://cashweaver.com/>Cash Weaver</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>